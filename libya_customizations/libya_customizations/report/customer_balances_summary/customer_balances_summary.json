{
 "add_total_row": 1,
 "add_translate_data": 0,
 "columns": [
  {
   "fieldname": "customer",
   "fieldtype": "Link",
   "label": "Customer",
   "options": "Customer",
   "width": 80
  },
  {
   "fieldname": "customer_name",
   "fieldtype": "Data",
   "label": "Customer Name",
   "width": 230
  },
  {
   "fieldname": "customer_group",
   "fieldtype": "Link",
   "label": "Customer Group",
   "options": "Customer Group",
   "width": 120
  },
  {
   "fieldname": "balance",
   "fieldtype": "Currency",
   "label": "Balance",
   "width": 140
  }
 ],
 "creation": "2024-12-24 14:30:32.645658",
 "disabled": 0,
 "docstatus": 0,
 "doctype": "Report",
 "filters": [
  {
   "default": "Today",
   "fieldname": "to_date",
   "fieldtype": "Date",
   "label": "To Date",
   "mandatory": 1,
   "wildcard_filter": 0
  },
  {
   "default": "All Balances",
   "fieldname": "show_balances",
   "fieldtype": "Select",
   "label": "Show Balances",
   "mandatory": 1,
   "options": "All Balances\nDebit Balances\nCredit Balances\nZero Balances",
   "wildcard_filter": 0
  }
 ],
 "idx": 12,
 "is_standard": "Yes",
 "letter_head": "",
 "letterhead": null,
 "modified": "2025-10-11 18:04:27.251448",
 "modified_by": "Administrator",
 "module": "Libya Customizations",
 "name": "Customer Balances Summary",
 "owner": "Administrator",
 "prepared_report": 0,
 "query": "WITH gl_entry AS (\nSELECT\n\tparty AS customer,\n    SUM(debit) AS debit,\n\tSUM(credit) AS credit,\n\tSUM(debit) - SUM(credit) AS balance\n\t\nFROM\n\t`tabGL Entry`\nWHERE\n\tis_cancelled = 0\nAND\n    party_type = 'Customer'\nAND\n\tposting_date <= %(to_date)s\nGROUP BY\n\tparty\n)\nSELECT\n\tcustomer.name AS customer,\n\tcustomer.customer_name,\n\tcustomer.customer_group,\n\tIFNULL(gl_entry.balance, 0) AS balance\nFROM\n\t`tabCustomer` customer\nLEFT JOIN\n\tgl_entry\nON\n\tcustomer.name = gl_entry.customer\nWHERE\n    (CASE\n        WHEN %(show_balances)s = 'All Balances' THEN TRUE\n        WHEN %(show_balances)s = 'Debit Balances' THEN ROUND(IFNULL(gl_entry.balance, 0), 2) > 0\n        WHEN %(show_balances)s = 'Credit Balances' THEN ROUND(IFNULL(gl_entry.balance, 0), 2) < 0\n        WHEN %(show_balances)s = 'Zero Balances' THEN ROUND(IFNULL(gl_entry.balance, 0), 2) = 0\n        ELSE FALSE\n    END)\nORDER BY\n\tIFNULL(gl_entry.balance, 0) DESC,\n\tcustomer.name",
 "ref_doctype": "GL Entry",
 "report_name": "Customer Balances Summary",
 "report_type": "Query Report",
 "roles": [
  {
   "role": "Accountant"
  },
  {
   "role": "Chief Sales Officer"
  },
  {
   "role": "Sales Supervisor"
  },
  {
   "role": "Sales Coordinator"
  },
  {
   "role": "System Manager"
  }
 ],
 "timeout": 0
}